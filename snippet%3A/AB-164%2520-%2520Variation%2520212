// document.documentElement.dataset.webAb164 = "1";

// window.addEventListener('load', () => {

console.log('LOADED')

const productGrid = document.querySelector('product-grid')
const productCards = document.querySelectorAll('cdx-card.card.ng-star-inserted');
console.log('>>>productCards ', productCards)
productCards.forEach(card=>{
    const strapLine = card.querySelector('.productStrap-text');
    const priceWas = card.querySelector('.price--was');
    const priceSave = card.querySelector('.price--save');
    const fullPrice = priceWas && priceWas.textContent.match('\\$(.*)');
    const savedPrice = priceSave && priceSave.textContent.match('\\$(.*)');
    // let percentage = 0;
    let strapLineText = '';

    // console.log('priceSave>>>', priceSave && priceSave.textContent)

    if (!priceSave && !priceWas) {
        return;
    }

    if (priceSave && priceSave.textContent.startsWith('Save')) {
        strapLineText = priceSave.textContent;

        // console.log('strapLineText>>>', savedPrice, strapLineText)
    }

    const priceTags = card.querySelectorAll('.price--was');
    const presentPriceEl = card.querySelector('.presentPrice');
    const presentPrice = presentPriceEl.ariaLabel;
    const nonMemberPrice = priceTags[1] && priceTags[1].textContent.match('\\$(.*)');
    const price = presentPrice.match(/\$([\d.]+)/)[1];

    if (nonMemberPrice && price) {
        // const percentage = 100 - (Math.round(Number(price) / Number(nonMemberPrice[1]) * 100));
        const saving = Number(nonMemberPrice[1]) - Number(price);

        console.log('saving>>> ', saving.toFixed(2))
    }


    // if (strapLine.textContent.startsWith('Save') || strapLine.textContent === '') {
    strapLine.textContent = strapLineText;
    // }
}
)

// }, false);
